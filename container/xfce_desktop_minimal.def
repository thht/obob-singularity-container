Bootstrap: docker
From: debian

%files
    files/00-aliases.sh /etc/profile.d/00-aliases.sh

%post
    export DEBIAN_FRONTEND=noninteractive
    apt update && apt -y full-upgrade
    # install xfce
    apt install -yq xfce4 dbus-x11 wget procps xfce4-goodies firefox-esr gnupg2 software-properties-common apt-transport-https curl vim sudo x11-apps ssh-askpass git zsh zsh-antigen libopenblas64-openmp-dev
   
    # install antibody
    curl -sfL git.io/antibody | sh -s - -b /usr/local/bin

    # make sure python works
    update-alternatives --install /usr/bin/python python /usr/bin/python3 1

    # install slurm
    apt install -yq libmunge-dev libmunge2 munge slurm-wlm slurm-wlm-doc

    # make sure python works
    update-alternatives --install /usr/bin/python python /usr/bin/python3 1

%apprun desktop
    dbus-launch xfce4-session

